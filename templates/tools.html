<!-- tools.html -->
<!DOCTYPE html>
<html lang="en" class="light">
<!-- Head Section -->

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WordWise ‚Äî Tools</title>

  <!--Related Links -->
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="icon" type="image/png" href="/static/images/logo.jpg">
  <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">

  <!--Script Links -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Enable Tailwind dark mode -->
  <script>
    tailwind.config = { darkMode: 'class' }
  </script>

  <!-- style section -->
  <style>
    .logo-animate {
      transition: all 0.5s ease;
    }

    .logo-animate:hover {
      transform: rotate(360deg) scale(1.1);
      filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.9));
    }

    .tool-card {
      transition: transform 0.5s, box-shadow 0.5s;
      cursor: pointer;
      position: relative;
      z-index: 10;
    }

    .tool-card:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);
    }

    .tool-card.focused {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90vw;
      /* Use viewport width */
      max-width: 95%;
      /* Never exceed screen */
      height: auto;
      max-height: 90vh;
      overflow-y: auto;
      padding: 1rem;
      /* responsive padding */
      box-sizing: border-box;
      z-index: 51;
      box-shadow: 0 40px 80px rgba(0, 0, 0, 0.6);
    }

    .page-blur {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.35);
      backdrop-filter: blur(8px);
      opacity: 0;
      transition: opacity 0.4s ease;
      pointer-events: none;
      z-index: 50;
    }

    .page-blur.show {
      opacity: 1;
      pointer-events: auto;
    }

    .tool-card:hover {
      box-shadow: 0 0 20px var(--glow-color);
    }

    body.light .tool-card:hover {
      --glow-color: rgba(0, 0, 0, 0.4);
    }

    body.dark .tool-card:hover {
      --glow-color: rgba(255, 255, 255, 0.7);
    }

    .tone-result {
      margin-top: 8px;
      text-align: left;
    }

    .tone-result p {
      margin: 2px 0;
      font-weight: 500;
    }

    /* Tone results readable in dark mode */
    .tone-result p {
      color: #222;
      /* default light mode */
    }

    body.dark .tone-result p {
      color: #f3f4f6;
      /* lighter gray for contrast on dark background */
    }

    /* Textareas readable */
    textarea {
      color: #111;
      /* black text in light mode */
    }

    body.dark textarea {
      color: #f9fafb;
      /* almost white for dark mode */
      background-color: #374151;
      /* slightly lighter gray for readability */
      border-color: #4b5563;
    }
  </style>
</head>

<!-- Body Section -->

<body class="light min-h-screen flex flex-col">

  <!-- Navbar -->
  <nav id="navbar" class="bg-white/70 dark:bg-gray-900 shadow-md sticky top-0 z-50 transition-colors">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-wrap justify-between items-center py-3">

        <!-- Brand -->
        <a href="/home" class="flex items-center gap-2 group select-none mb-2 md:mb-0">
          <img src="/static/images/logo.jpg" alt="WordWise Logo" loading="lazy"
            class="w-[clamp(32px,6vw,48px)] h-[clamp(32px,6vw,48px)] rounded-full logo-animate object-cover border-2 border-gray-300 dark:border-white" />
          <span class="text-[clamp(1.1rem,2vw,1.75rem)] font-extrabold tracking-tight">
            <span class="bg-clip-text text-transparent bg-gradient-to-r from-fuchsia-500 to-pink-500">Word</span>
            <span class="text-gray-900 dark:text-white">Wise</span>
          </span>
        </a>

        <!-- Desktop Nav Links (wraps on medium screens) -->
        <div class="hidden md:flex flex-wrap justify-center flex-1 gap-4 text-[clamp(0.9rem,1.3vw,1.1rem)]">
          <a href="/home" class="flex items-center gap-1 hover:text-pink-600"><i class="ri-home-2-line"></i>
            Home</a>
          <a href="/resource" class="flex items-center gap-1 hover:text-pink-600"><i class="ri-book-line"></i>
            Resources</a>
          <a href="/blog" class="flex items-center gap-1 hover:text-pink-600"><i class="ri-file-text-line"></i>
            Blog</a>
          <a href="/about" class="flex items-center gap-1 hover:text-pink-600"><i class="ri-information-line"></i>
            About Us</a>
          <a href="https://en.wikipedia.org/wiki/English_grammar" target="_blank"
            class="flex items-center gap-1 hover:text-pink-600">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"
              class="w-[clamp(18px,2vw,22px)] h-[clamp(18px,2vw,22px)] fill-current"><text x="7" y="35" font-size="28"
                font-weight="bold">W</text></svg> Wikipedia
          </a>
          <a href="https://www.dictionary.com/" target="_blank" class="flex items-center gap-1 hover:text-pink-600"><i
              class="ri-book-2-line"></i> Dictionary</a>
          <a href="https://www.grammarly.com/" target="_blank" class="flex items-center gap-1 hover:text-pink-600"><i
              class="ri-check-double-line"></i> Grammarly</a>
        </div>

        <!-- Right Side: Buttons + Hamburger -->
        <div class="flex items-center gap-3">
          <!-- Theme Toggle -->
          <button id="themeToggle"
            class="px-3 py-1 rounded-lg bg-pink-500 text-white hover:bg-pink-600 flex items-center gap-2">
            <i class="ri-moon-clear-line"></i> <span class="hidden sm:inline">Toggle</span>
          </button>



          <!-- Hamburger (mobile only) -->
          <button id="menu-toggle" class="md:hidden text-3xl focus:outline-none">‚ò∞</button>
        </div>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden flex-col gap-4 p-4 bg-white dark:bg-gray-900 shadow-md">
      <a href="/home" class="flex items-center gap-1 hover:text-pink-600"><i class="ri-home-2-line"></i> Home</a>
      <a href="/resource" class="flex items-center gap-1 hover:text-pink-600"><i class="ri-book-line"></i>
        Resources</a>
      <a href="/blog" class="flex items-center gap-1 hover:text-pink-600"><i class="ri-file-text-line"></i> Blog</a>
      <a href="/about" class="flex items-center gap-1 hover:text-pink-600"><i class="ri-information-line"></i> About
        Us</a>
      <a href="https://en.wikipedia.org/wiki/English_grammar" target="_blank"
        class="flex items-center gap-1 hover:text-pink-600">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" class="w-5 h-5 fill-current"><text x="7" y="35"
            font-size="28" font-weight="bold">W</text></svg> Wikipedia
      </a>
      <a href="https://www.dictionary.com/" target="_blank" class="flex items-center gap-1 hover:text-pink-600"><i
          class="ri-book-2-line"></i> Dictionary</a>
      <a href="https://www.grammarly.com/" target="_blank" class="flex items-center gap-1 hover:text-pink-600"><i
          class="ri-check-double-line"></i> Grammarly</a>
    </div>
  </nav>

  <!-- Production Disclaimer -->
  <div
    class="w-full bg-red-600 text-white text-[8px] py-0.5 text-center font-bold uppercase tracking-wider z-[60] select-none">
    ‚ö†Ô∏è PRODUCTION DEMO: Not a real website. All features for demonstration. Data is temporary. ‚ö†Ô∏è
  </div>

  <script>
    document.getElementById("menu-toggle").addEventListener("click", () => {
      document.getElementById("mobile-menu").classList.toggle("hidden");
    });
  </script>

  <!-- Overlay -->
  <div id="overlay" class="page-blur"></div>

  <!-- Hero Section -->
  <section class="w-full flex flex-col items-center justify-center text-center py-12">
    <h1 class="text-4xl md:text-5xl font-extrabold mb-6"><span
        class="bg-clip-text text-transparent bg-gradient-to-r from-yellow-300 to-pink-500">WordWise</span>
      Tools
    </h1>
  </section>

  <!-- Tool Content -->
  <main class="flex-1 flex flex-col items-center justify-center p-6 gap-10">
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 w-full max-w-6xl">

      <!-- Word Counter -->
      <div class="tool-card bg-white/90 dark:bg-gray-800 p-6 rounded-2xl shadow-lg text-center transition-colors">
        <h3 class="text-xl font-semibold mb-2">Word Counter</h3>
        <textarea id="wordText" class="w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 mb-2" rows="4"
          placeholder="Type or paste text here..."></textarea>
        <p class="text-gray-700 dark:text-gray-300 mb-2">Words: <span id="wordCount">0</span></p>
        <button id="countBtn" class="bg-pink-500 text-white px-4 py-1 rounded-lg hover:bg-pink-600">Count</button>
      </div>

      <!-- Tone Detector -->
      <div class="tool-card bg-white/90 dark:bg-gray-800 p-6 rounded-2xl shadow-lg text-center transition-colors">
        <h3 class="text-xl font-semibold mb-2">Tone Detector</h3>
        <textarea id="toneText" class="w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 mb-2" rows="4"
          placeholder="Type your text here..."></textarea>
        <button id="detectToneBtn" class="bg-pink-500 text-white px-4 py-1 rounded-lg hover:bg-pink-600 mb-2">Detect
          Tone</button>
        <div id="toneResults" class="tone-result text-gray-700 dark:text-gray-300"></div>
      </div>

      <!-- Grammar Checker -->
      <div class="tool-card bg-white/90 dark:bg-gray-800 p-6 rounded-2xl shadow-lg text-center transition-colors">
        <h3 class="text-xl font-semibold mb-2">Grammar Checker</h3>
        <textarea class="w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 mb-2" rows="4"
          placeholder="Type your text..."></textarea>
        <p class="text-gray-700 dark:text-gray-300">Grammar suggestions coming soon!</p>
      </div>

    </div>
  </main>

  <!-- Game Section -->
  <div class="flex flex-col md:flex-row gap-6 justify-center items-stretch w-full max-w-6xl mx-auto px-4 my-12">

    <!-- Quick Typing Challenge -->
    <div class="tool-card bg-white/90 dark:bg-gray-800 p-6 rounded-2xl shadow-lg text-center 
                transition-transform duration-300 flex-1 flex flex-col" tabindex="0">
      <h3 class="text-xl font-semibold mb-4">Quick Typing Challenge</h3>

      <p id="humorMsg" class="text-gray-700 dark:text-gray-300 font-medium mb-2"></p>
      <p id="typingText" class="text-gray-900 dark:text-gray-100 text-lg mb-4"></p>

      <textarea id="typingInput"
        class="w-full p-2 rounded-lg border border-gray-300 dark:border-gray-600 mb-2 flex-grow" rows="3"
        placeholder="Start typing here..."></textarea>

      <p id="typingWPM" class="text-gray-700 dark:text-gray-300 mt-2 font-medium"></p>
      <button id="newTypingRound" class="bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600 mt-2">New
        Round</button>
    </div>

    <!-- Hangman Game -->
    <div class="tool-card bg-white/90 dark:bg-gray-800 p-6 rounded-2xl shadow-lg text-center 
                transition-transform duration-300 flex-1 flex flex-col" tabindex="0">
      <h3 class="text-xl font-semibold mb-4">Hangman Game</h3>

      <pre id="hangmanDrawing" class="text-pink-500 text-lg mb-4"></pre>
      <p id="displayWord" class="text-gray-700 dark:text-gray-300 text-2xl font-mono mb-4"></p>

      <div class="flex justify-center gap-2 mb-4 flex-wrap">
        <input id="letterInput" type="text" maxlength="1"
          class="w-14 p-2 rounded-lg border border-gray-300 dark:border-gray-600 text-center text-xl
                      bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500" placeholder="A" />
        <button id="guessBtn" class="bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600">Guess</button>
      </div>

      <p id="wrongLetters" class="text-gray-700 dark:text-gray-300 mb-4">Wrong guesses: </p>
      <button id="resetHangman" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 mt-2">Restart
        Game</button>
    </div>

  </div>

  <!-- Word Speed Game -->
  <script>
    const sentences = [
      "The quick brown fox jumps over the lazy dog. It has been used as a typing exercise for decades because it contains every letter of the English alphabet. Even though it is short, it remains a classic challenge for beginners.",
      "Typing is fun when you do it fast. With a little practice every day, you can increase your speed and accuracy in no time. Remember, consistency is the secret ingredient of progress.",
      "WordWise makes learning entertaining. It combines playfulness with productivity, making it easier to stay motivated while you practice. Who knew typing could feel like a game?",
      "JavaScript brings websites to life. From animations to interactive tools, it helps transform static pages into engaging experiences. It is truly the magic wand of the web.",
      "Practice makes perfect every single day. Even five minutes of focused typing practice can improve your skills steadily over time. Small steps eventually lead to giant leaps.",
      "Coding and coffee go hand in hand. Developers often joke that caffeine is the real programming language that powers everything. Without coffee, half the code in the world might never be written.",
      "Learning never exhausts the mind. In fact, the more you learn, the easier it becomes to absorb new knowledge and skills. It‚Äôs like exercise for your brain that only makes it stronger."
    ];

    let startTime;

    function newTypingRound() {
      const randomSentence = sentences[Math.floor(Math.random() * sentences.length)];
      document.getElementById("typingText").textContent = randomSentence;

      document.getElementById("humorMsg").textContent = ""; // Clear humor until result
      document.getElementById("typingInput").value = "";
      document.getElementById("typingWPM").textContent = "";
      document.getElementById("typingInput").focus();

      startTime = new Date();
    }

    function calculateWPM() {
      const inputText = document.getElementById("typingInput").value.trim();
      const originalText = document.getElementById("typingText").textContent.trim();

      if (!inputText) return;

      const endTime = new Date();
      const minutes = (endTime - startTime) / 60000;

      // Compare words
      const inputWords = inputText.split(/\s+/);
      const originalWords = originalText.split(/\s+/);
      let correctWords = 0;

      for (let i = 0; i < inputWords.length; i++) {
        if (inputWords[i] === originalWords[i]) correctWords++;
      }

      const wpm = Math.round(correctWords / minutes);

      // Accuracy calculation
      let accuracy = Math.round((correctWords / originalWords.length) * 100);
      let resultMsg = `Typing Speed: ${wpm} WPM | Accuracy: ${accuracy}%`;

      if (accuracy === 100) {
        resultMsg = `üéâ Perfect! ${resultMsg}`;
      } else if (accuracy >= 80) {
        resultMsg = `‚úÖ Good! ${resultMsg}`;
      } else {
        resultMsg = `‚ö†Ô∏è Keep Practicing! ${resultMsg}`;
      }

      document.getElementById("typingWPM").textContent = resultMsg;

      // üé≠ Humor feedback based on WPM
      let humor = "";
      if (wpm < 20) {
        humor = "üê¢ Did you fall asleep on the keyboard? Even a turtle types faster.";
      } else if (wpm < 40) {
        humor = "üêå My grandma with arthritis types quicker than that.";
      } else if (wpm < 60) {
        humor = "üö∂ Meh‚Ä¶ that‚Äôs average at best. Speed up, rookie.";
      } else if (wpm < 80) {
        humor = "üèéÔ∏è Okay, finally some speed‚Äîstill not enough to impress though.";
      } else {
        humor = "‚ö° What are you, a keyboard demon? Slow down before the keys melt!";
      }

      document.getElementById("humorMsg").textContent = humor;
    }

    document.getElementById("typingInput").addEventListener("keyup", (e) => {
      if (e.key === "Enter") {
        calculateWPM();
      }
    });

    document.getElementById("newTypingRound").addEventListener("click", newTypingRound);

    newTypingRound();
  </script>

  <!-- Word Guesser -->
  <script>
    const words = [
      "example", "journey", "puzzle", "hangman", "mystery", "fabulous", "notebook",
      "programming", "javascript", "elephant", "umbrella", "keyboard", "internet",
      "galaxy", "mountain", "adventure", "butterfly", "chocolate"
    ];
    let selectedWord, guessedLetters, wrongGuesses, maxWrong;

    const displayWordEl = document.getElementById("displayWord");
    const hangmanDrawingEl = document.getElementById("hangmanDrawing");
    const wrongLettersEl = document.getElementById("wrongLetters");
    const letterInput = document.getElementById("letterInput");
    const guessBtn = document.getElementById("guessBtn");
    const resetBtn = document.getElementById("resetHangman");

    const hangmanStates = [
      `
      +---+
      |   |
          |
          |
          |
          |
      =======`,
      `
      +---+
      |   |
      O   |
          |
          |
          |
      =======`,
      `
      +---+
      |   |
      O   |
      |   |
          |
          |
      =======`,
      `
      +---+
      |   |
      O   |
      /|   |
          |
          |
      =======`,
      `
      +---+
      |   |
      O   |
      /|\\  |
          |
          |
      =======`,
      `
      +---+
      |   |
      O   |
      /|\\  |
      /    |
          |
      =======`,
      `
      +---+
      |   |
      O   |
      /|\\  |
      / \\  |
          |
      =======`
    ];

    function initGame() {
      selectedWord = words[Math.floor(Math.random() * words.length)].toUpperCase();
      guessedLetters = selectedWord.split("").map((letter, i) =>
        (i === 0 || i === selectedWord.length - 1 ? letter : "_")
      );
      wrongGuesses = [];
      maxWrong = hangmanStates.length - 1;
      updateDisplay();
    }

    function updateDisplay() {
      displayWordEl.textContent = guessedLetters.join(" ");
      hangmanDrawingEl.textContent = hangmanStates[wrongGuesses.length];
      wrongLettersEl.textContent = "Wrong guesses: " + wrongGuesses.join(", ");
    }

    function makeGuess() {
      const guess = letterInput.value.toUpperCase();
      letterInput.value = "";

      // Only A-Z allowed
      if (!/^[A-Z]$/.test(guess)) return;

      // If already guessed wrong, ignore
      if (wrongGuesses.includes(guess)) return;

      if (selectedWord.includes(guess)) {
        selectedWord.split("").forEach((letter, i) => {
          if (letter === guess) guessedLetters[i] = guess;
        });
      } else {
        wrongGuesses.push(guess);
      }

      updateDisplay();
      checkGameOver();
    }

    function checkGameOver() {
      if (!guessedLetters.includes("_")) {
        setTimeout(() => alert("üéâ You Win! The word was: " + selectedWord), 100);
      } else if (wrongGuesses.length >= maxWrong) {
        setTimeout(() => alert("üíÄ You Lose! The word was: " + selectedWord), 100);
      }
    }

    guessBtn.addEventListener("click", makeGuess);

    // Trigger guess on Enter key
    letterInput.addEventListener("keyup", (e) => {
      if (e.key === "Enter") makeGuess();
    });

    resetBtn.addEventListener("click", initGame);

    // Initialize game on load
    initGame();
  </script>

  <!-- Scroll to Top Button -->
  <button id="scrollTopBtn" title="Go to top">
    <i class="ri-arrow-up-line"></i>
  </button>

  <script>
    const scrollBtn = document.getElementById("scrollTopBtn");

    scrollBtn.addEventListener("click", (e) => {
      e.preventDefault(); // Prevent any default jump behavior

      // Smooth scroll using requestAnimationFrame
      const startPosition = window.scrollY;
      const duration = 600; // in ms
      let startTime = null;

      function scrollAnimation(currentTime) {
        if (!startTime) startTime = currentTime;
        const timeElapsed = currentTime - startTime;
        const run = ease(timeElapsed, startPosition, -startPosition, duration);
        window.scrollTo(0, run);
        if (timeElapsed < duration) requestAnimationFrame(scrollAnimation);
      }

      // Ease function for smoothness
      function ease(t, b, c, d) {
        t /= d / 2;
        if (t < 1) return c / 2 * t * t + b;
        t--;
        return -c / 2 * (t * (t - 2) - 1) + b;
      }

      requestAnimationFrame(scrollAnimation);
    });
    // Show/hide scroll-to-top button
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        scrollBtn.style.display = "block";
      } else {
        scrollBtn.style.display = "none";
      }
    });

    // Scroll to top on click
    scrollBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  </script>

  <!-- Main Script -->
  <script>
    const themeToggle = document.getElementById("themeToggle");
    const body = document.body;

    // Apply saved theme on page load
    if (localStorage.getItem("theme") === "dark") {
      body.classList.add("dark");
      body.classList.remove("light");
    } else {
      body.classList.add("light");
      body.classList.remove("dark");
    }

    // Toggle theme on button click
    themeToggle.addEventListener("click", () => {
      body.classList.toggle("dark");
      body.classList.toggle("light");

      // Save the current theme to localStorage
      if (body.classList.contains("dark")) {
        localStorage.setItem("theme", "dark");
      } else {
        localStorage.setItem("theme", "light");
      }
    });

    // Word Counter Logic
    const wordText = document.getElementById("wordText");
    const wordCount = document.getElementById("wordCount");
    const countBtn = document.getElementById("countBtn");
    countBtn.addEventListener("click", () => {
      const words = wordText.value.trim().split(/\s+/).filter(w => w.length > 0);
      wordCount.textContent = words.length;
    });

    // Tone Detector Logic (Upgraded)
    const detectBtn = document.getElementById("detectToneBtn");
    const toneText = document.getElementById("toneText");
    const toneResults = document.getElementById("toneResults");

    function detectTone(text) {
      const tones = {
        Question: { emoji: "‚ùì", words: ["?"] },
        Exclamation: { emoji: "‚ùó", words: ["!"] },
        Positive: { emoji: "üôÇ", words: ["happy", "love", "amazing", "great", "good", "fantastic", "awesome"] },
        Negative: { emoji: "‚òπÔ∏è", words: ["sad", "hate", "terrible", "bad", "awful", "horrible"] },
        Angry: { emoji: "üò°", words: ["angry", "furious", "annoyed", "mad", "irritated"] },
        Surprise: { emoji: "üò≤", words: ["wow", "unbelievable", "shocking", "amazing", "unexpected"] },
        Confused: { emoji: "ü§î", words: ["maybe", "not sure", "confused", "unsure"] },
        Sarcastic: { emoji: "üòè", words: ["yeah right", "as if", "sure", "obviously"] },
        Urgent: { emoji: "‚ö†Ô∏è", words: ["immediately", "urgent", "now", "asap"] },
        Formal: { emoji: "üìú", words: ["regards", "sincerely", "henceforth", "therefore", "respectfully"] },
        Casual: { emoji: "üòé", words: ["hey", "lol", "cool", "yeah", "nah", "btw"] },
        Friendly: { emoji: "üòä", words: ["glad", "happy", "thanks", "friend", "cheerful"] },
        Professional: { emoji: "üíº", words: ["meeting", "deadline", "project", "objective", "collaborate"] },
        Polite: { emoji: "üôè", words: ["please", "kindly", "thank you", "appreciate", "could you"] },
        Neutral: { emoji: "üìù", words: [] } // fallback
      };

      const sentences = text.split(/(?<=[.?!])/);
      return sentences.map(sentence => {
        let lowerSentence = sentence.toLowerCase();
        let detected = [];

        for (let tone in tones) {
          let score = tones[tone].words.filter(w => lowerSentence.includes(w)).length;
          if (score > 0 || (tone === "Question" && sentence.trim().endsWith("?")) || (tone === "Exclamation" && sentence.trim().endsWith("!"))) {
            detected.push({ tone: tone, score: score, emoji: tones[tone].emoji });
          }
        }

        if (detected.length === 0) {
          return { sentence: sentence.trim(), tone: "Neutral üìù" };
        }

        // Sort by score and return top match
        detected.sort((a, b) => b.score - a.score);
        return { sentence: sentence.trim(), tone: `${detected[0].tone} ${detected[0].emoji} (confidence: ${detected[0].score})` };
      });
    }

    detectBtn.addEventListener("click", () => {
      toneResults.innerHTML = "";
      const text = toneText.value;
      if (!text.trim()) return;
      const results = detectTone(text);
      results.forEach(r => {
        const p = document.createElement("p");
        p.textContent = `"${r.sentence}" ‚Üí ${r.tone}`;
        toneResults.appendChild(p);
      });
    });

    // Card pop-up logic
    const cards = document.querySelectorAll(".tool-card");
    const overlay = document.getElementById("overlay");

    cards.forEach(card => {
      card.addEventListener("click", e => {
        if (["TEXTAREA", "INPUT", "BUTTON"].includes(e.target.tagName)) return;
        cards.forEach(c => c.classList.remove("focused"));
        card.classList.add("focused");
        overlay.classList.add("show");
      });
    });

    overlay.addEventListener("click", () => {
      cards.forEach(c => c.classList.remove("focused"));
      overlay.classList.remove("show");
    });
  </script>

</body>

</html>